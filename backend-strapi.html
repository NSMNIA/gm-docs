<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Over Strapi – Platform Generator</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/main.min.css">
</head>

<body>
    <nav class="pg__nav-bar">
        <div class="pg__nav-bar--content">
            <a class="pg__nav-bar--logo" href="index.html">
                <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 422.46">
                    <defs>
                        <style>
                            .cls-1 {
                                fill: #F88F01;
                            }
                        </style>
                    </defs>
                    <path class="cls-1"
                        d="M634.79,295.4c-5.91,13.62-12.72,30-20.22,48.64s-15.38,38.58-24.07,61.08l-9.9,25.36c-8.25,21.35-16.4,42-24.23,61.32-7.35,18.2-14,34.35-19.75,47.83-5.75-13.54-12.31-29.61-19.5-47.8q-11.62-29.19-24.49-61.36l-9.85-25.34c-7.64-19.79-15.52-39.77-24.08-61.09-7.73-19.11-14.54-35.48-20.26-48.64l-1.4-3.22H395.65l3.35,7.53c4.86,10.92,10.69,24.67,17.33,40.87h0q10.55,25.52,23,56,10.86,26.64,22.57,55.07L465.3,460q13.51,32.83,26,63.32c9.39,22.9,16.77,40.67,23.23,55.9,6.8,16,12.57,29.89,17.15,41.15l4.79,11.79,5.07-11.68C546.14,609.85,552,596,559,579.2q10.54-25.35,23-55.88T607.73,460q13.32-32.91,25.77-63.37c8-19.52,15.76-38.36,23.18-56l1.41-3.37q9.76-23.25,15.77-37.66l3.09-7.41H636.19Z"
                        transform="translate(-164.94 -209.72)" />
                    <path class="cls-1"
                        d="M425.56,501.31v0q-10.55-25.5-23-56Q391.7,418.59,380,390.11l-3.38-8.23q-13.51-32.83-26-63.33c-9.33-22.74-16.71-40.5-23.23-55.89-6.81-16.06-12.58-29.9-17.15-41.15l-4.79-11.79-5.07,11.67c-4.6,10.59-10.47,24.49-17.43,41.3s-14.7,35.52-23,55.87S243.05,360,234.16,381.91s-17.47,43-25.77,63.36c-7.94,19.48-15.74,38.32-23.18,56q-10.74,25.58-17.18,41l-3.09,7.4H205.7l1.4-3.22c5.9-13.59,12.71-30,20.22-48.64s15.38-38.58,24.07-61.07l9.9-25.36c8.24-21.35,16.4-42,24.22-61.33,7.37-18.24,14-34.39,19.76-47.83,5.74,13.51,12.3,29.59,19.5,47.81q11.63,29.19,24.49,61.36l9.85,25.33c7.64,19.77,15.51,39.75,24.07,61.1,7.75,19.15,14.57,35.51,20.27,48.63l1.4,3.22h41.39l-3.35-7.52C438.05,531.31,432.22,517.56,425.56,501.31Z"
                        transform="translate(-164.94 -209.72)" />
                </svg>
            </a>
            <div>
                <a href="https://136.144.240.117/" class="pg__link button" target="_blank">Platform Generator</a>
            </div>
        </div>
    </nav>

    <article class="pg__content">
        <div class="pg__column">
            <div class="pg__navigation">
                <div class="pg__navigation--text">
                    Installatie
                </div>
                <a class="pg__navigation--link" href="index.html">
                    <div class="pg__navigation--icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M2 3h6a4 4 0 014 4v14a3 3 0 00-3-3H2z"></path>
                            <path d="M22 3h-6a4 4 0 00-4 4v14a3 3 0 013-3h7z"></path>
                        </svg>
                    </div>
                    <div class="pg__navigation--link-title">
                        Getting Started
                    </div>
                </a>
                <div class="pg__navigation--text">
                    Front-end
                </div>
                <a class="pg__navigation--link" href="frontend-structuur.html">
                    <div class="pg__navigation--icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M6 17l2-5h14l-3 8a2 2 0 01-2 1H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h7a2 2 0 012 2v4">
                            </path>
                        </svg>
                    </div>
                    <div class="pg__navigation--link-title">
                        Structuur
                    </div>
                </a>
                <a class="pg__navigation--link" href="frontend-componenten.html">
                    <div class="pg__navigation--icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path
                                d="M21 16V8a2 2 0 00-1-1.73l-7-4a2 2 0 00-2 0l-7 4A2 2 0 003 8v8a2 2 0 001 1.73l7 4a2 2 0 002 0l7-4A2 2 0 0021 16z">
                            </path>
                            <polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline>
                            <line x1="12" y1="22.08" x2="12" y2="12"></line>
                        </svg>
                    </div>
                    <div class="pg__navigation--link-title">
                        Componenten
                    </div>
                </a>
                <div class="pg__navigation--text">
                    Backend-end
                </div>
                <a class="pg__navigation--link active" href="backend-strapi.html">
                    <div class="pg__navigation--icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect x="4" y="2" width="16" height="20" rx="2" ry="2"></rect>
                            <path d="M9 22v-4h6v4"></path>
                            <path d="M8 6h.01"></path>
                            <path d="M16 6h.01"></path>
                            <path d="M12 6h.01"></path>
                            <path d="M12 10h.01"></path>
                            <path d="M12 14h.01"></path>
                            <path d="M16 10h.01"></path>
                            <path d="M16 14h.01"></path>
                            <path d="M8 10h.01"></path>
                            <path d="M8 14h.01"></path>
                        </svg>
                    </div>
                    <div class="pg__navigation--link-title">
                        Over Strapi
                    </div>
                </a>
                <a class="pg__navigation--link" href="backend-database.html">
                    <div class="pg__navigation--icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <ellipse cx="12" cy="5" rx="9" ry="3"></ellipse>
                            <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"></path>
                            <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"></path>
                        </svg>
                    </div>
                    <div class="pg__navigation--link-title">
                        Database
                    </div>
                </a>
                <div class="pg__navigation--text">
                    Skeleton
                </div>
                <a class="pg__navigation--link" href="skeleton.html">
                    <div class="pg__navigation--icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 3H3v7h18V3z"></path>
                            <path d="M21 14h-5v7h5v-7z"></path>
                            <path d="M12 14H3v7h9v-7z"></path>
                        </svg>
                    </div>
                    <div class="pg__navigation--link-title">
                        Updaten
                    </div>
                </a>
            </div>
            <div class="pg__documentation">
                <h1 id="over_strapi">Over Strapi</h1>
                <blockquote class="pg__documentation--start">
                    Deze pagina is een overzicht over wat Strapi is en hoe het is ingericht.
                </blockquote>
                <p>
                    <a href="https://strapi.io/" class="pg__link">Strapi</a> is een open-source Headless CMS. Het is
                    gemaakt in
                    JavaScript en volledig aanpasbaar. Via een API call vanuit de Front-end
                    kan de data opgehaald worden.
                </p>
                <h2 id="socket-io">Socket.io</h2>
                <p>
                    Data ophalen vanuit de back-end gebeurt met <a href="https://socket.io/"
                        class="pg__link">Socket.io</a>. Socket.io
                    is
                    een library die realtime, bidirectionele en op gebeurtenissen gebaseerde communicatie tussen de
                    browser en de server
                    mogelijk maakt.
                </p>
                <p>
                    In <i>/config/functions/bootstrap.js</i> in <i>module.export()</i> staat de initialisatie van
                    Socket.io. Pas de
                    <i>origin</i> aan naar de Front-end URI. Dit zou eventueel ook
                    kunnen met een <i>.env</i> bestand voor de back-end. Deze code zorgt ervoor dat alleen deze
                    Front-end de data op mag
                    halen via Socket.io.
                </p>
                <pre><xmp>const io = require("socket.io")(strapi.server, {
    cors: {
        origin: "http://localhost:3000",
        methods: ["GET", "POST"],
    },
});</xmp></pre>
                <p>
                    Als de connectie werkt worden de functies pas geïnitialiseerd.
                </p>
                <pre><xmp>io.on("connection", function (socket) {
    // functies voor data ophalen
}</xmp></pre>
                <h3>Data functie ophalen</h3>
                <p>
                    Om de juiste data op te halen bij de call wordt er gevraagd voor de naamgeving. Als deze naamgeving
                    klopt moet er een andere functie aangeroepen worden die zorgt dat er data opgehaald
                    wordt. Dit hoeft niet perse maar dit maak het wel een stuk overzichtelijk.
                </p>
                <pre><xmp>socket.on('product', async ({id}, callback) => {
    try{
    const product = await getProduct({id});
        if(product){
            callback(product);
        }else{
            console.error('Error');
            callback({ type: "error", message: 'Product doens\'t exist.' });
        }
    }catch(err){
        console.error({ err });
        callback({ type: "error", message: err });
    }
})</xmp></pre>
                <p>
                    In dit geval is <i>product</i> de naamgeving en <i>GetProduct</i> de functie. <i>GetProduct</i> is
                    te vinden in <i>/config/functions/utils/product-database.js</i>. Voer dan een query uit
                    voor de data die gevraagd moet worden. Om meer over de Strapi queries te vinden:
                    <a target="_blank"
                        href="https://strapi.io/documentation/developer-docs/latest/development/backend-customization.html#queries"
                        class="pg__link">Strapi query documentatie</a>
                </p>
                <pre><xmp>async function getProduct({id}){
    try {
        const product = await strapi.query('products').findOne({id: id});
        delete product?.created_by;
        delete product?.updated_by;
        return product;
    }catch(err){
        console.log({ err });
        return { type: "error", message: "This product doesn't exist." };
    }
}
...
module.exports = {
    getProduct,
};</xmp></pre>
                <blockquote class="pg__tip">
                    <p>👍 Tip van Kevin</p>
                    <p>Zorg ervoor dat als er een nieuwe functie wordt toegevoegd in <i>product-database.js</i> of
                        <i>article-database.js</i> dat deze wordt meegegeven in <i>module.export</i>
                        en wordt opgevangen in <i>bootstrap.js</i>:
                    <pre><xmp>const { getProduct } = require("./utils/product-database");</xmp></pre>
                    </p>
                </blockquote>
                <p>
                    Om deze query uit te voeren moet het aangeroepen worden in de Front-end. In de functie
                    <i>socket.emit</i> moet eerst
                    de naamgeving (in dit geval <i>"product"</i>) worden gegeven en daarna de
                    data die meegestuurd moet worden (<i>"id"</i>). Daarna moet een functie komen die de data afhandeld.
                </p>
                <pre><xmp>//Front-end
try {
    socket.open();
    socket.emit("product",{ id: props.match.params.id }, (product) => {
        "type"in product&&"error"===product.type&&setError(!0);
        setProduct(product);
    });
} catch (err) {
    console.error(err);
    setError(false);
}

return () => {
    socket.close();
}
        </xmp></pre>
                <blockquote class="pg__tip">
                    <p>👍 Tip van Kevin</p>
                    <p>
                    <pre><xmp>"type"in product&&"error"===product.type&&setError(!0);</xmp></pre>
                    Deze functie kijkt of in de variabele <i>product.type</i> een waarde heeft van <i>error</i>. Als
                    deze error er is
                    dan wordt de <i>useState</i> op <i>true</i> gezet en kan in de
                    return van de component dit netjes afgehandeld worden.
                    </p>
                </blockquote>
                <h2 id="mollie">Mollie</h2>
                <p>
                    De officiële <a href="https://github.com/mollie/mollie-api-node" target="_blank"
                        class="pg__link">Mollie NodeJS
                        documentatie</a> geeft aan dat Mollie altijd in de back-end
                    aangemaakt moet worden. Dit komt omdat anders de <i>API key</i> en data gezien kan worden in de
                    Front-end. Hoe
                    payment nu gedaan wordt en hoe Strapi de betaling checkt zijn er twee
                    verschillende functies gemaakt in <i>/api/order/controllers/order.js</i>.
                </p>
                <div class="pg__buttons">
                    <a class="pg__button--redirect back" href="frontend-componenten.html">
                        Ga terug naar Componenten.
                    </a>
                    <a class="pg__button--redirect forward" href="backend-database.html">
                        Ga naar Database.
                    </a>
                </div>

            </div>
            <div class="pg__toc">
                <div class="pg__toc--page">
                    Over Strapi
                </div>
                <ul class="pg__toc--contents">
                    <li class="pg__toc--contents-item">
                        <a href="#over_strapi" class="pg__toc--link">Over Strapi</a>
                    </li>
                    <li class="pg__toc--contents-item">
                        <a href="#socket-io" class="pg__toc--link with-counter">
                            Socket.io
                        </a>
                    </li>
                    <li class="pg__toc--contents-item">
                        <a href="#mollie" class="pg__toc--link with-counter">
                            Mollie
                        </a>
                    </li>
                </ul>
            </div>
        </div>
        <div class="pg__footer">
            <div class="pg__footer--content">
                <a href="index.html" class="pg__footer--logo">
                    <svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 422.46">
                        <defs>
                            <style>
                                .cls-1 {
                                    fill: #F88F01;
                                }
                            </style>
                        </defs>
                        <path class="cls-1"
                            d="M634.79,295.4c-5.91,13.62-12.72,30-20.22,48.64s-15.38,38.58-24.07,61.08l-9.9,25.36c-8.25,21.35-16.4,42-24.23,61.32-7.35,18.2-14,34.35-19.75,47.83-5.75-13.54-12.31-29.61-19.5-47.8q-11.62-29.19-24.49-61.36l-9.85-25.34c-7.64-19.79-15.52-39.77-24.08-61.09-7.73-19.11-14.54-35.48-20.26-48.64l-1.4-3.22H395.65l3.35,7.53c4.86,10.92,10.69,24.67,17.33,40.87h0q10.55,25.52,23,56,10.86,26.64,22.57,55.07L465.3,460q13.51,32.83,26,63.32c9.39,22.9,16.77,40.67,23.23,55.9,6.8,16,12.57,29.89,17.15,41.15l4.79,11.79,5.07-11.68C546.14,609.85,552,596,559,579.2q10.54-25.35,23-55.88T607.73,460q13.32-32.91,25.77-63.37c8-19.52,15.76-38.36,23.18-56l1.41-3.37q9.76-23.25,15.77-37.66l3.09-7.41H636.19Z"
                            transform="translate(-164.94 -209.72)" />
                        <path class="cls-1"
                            d="M425.56,501.31v0q-10.55-25.5-23-56Q391.7,418.59,380,390.11l-3.38-8.23q-13.51-32.83-26-63.33c-9.33-22.74-16.71-40.5-23.23-55.89-6.81-16.06-12.58-29.9-17.15-41.15l-4.79-11.79-5.07,11.67c-4.6,10.59-10.47,24.49-17.43,41.3s-14.7,35.52-23,55.87S243.05,360,234.16,381.91s-17.47,43-25.77,63.36c-7.94,19.48-15.74,38.32-23.18,56q-10.74,25.58-17.18,41l-3.09,7.4H205.7l1.4-3.22c5.9-13.59,12.71-30,20.22-48.64s15.38-38.58,24.07-61.07l9.9-25.36c8.24-21.35,16.4-42,24.22-61.33,7.37-18.24,14-34.39,19.76-47.83,5.74,13.51,12.3,29.59,19.5,47.81q11.63,29.19,24.49,61.36l9.85,25.33c7.64,19.77,15.51,39.75,24.07,61.1,7.75,19.15,14.57,35.51,20.27,48.63l1.4,3.22h41.39l-3.35-7.52C438.05,531.31,432.22,517.56,425.56,501.31Z"
                            transform="translate(-164.94 -209.72)" />
                    </svg>
                </a>
                <div class="pg__footer--links">
                    <a href="https://github.com/NSMNIA/SkeletonMaker" target="_blank" class="pg__footer--link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path
                                d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0020 4.77 5.07 5.07 0 0019.91 1S18.73.65 16 2.48a13.38 13.38 0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 005 4.77a5.44 5.44 0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 009 18.13V22">
                            </path>
                        </svg>
                    </a>
                </div>
                <div class="pg__footer--copy">
                    Gravity Media &copy;
                </div>
            </div>
        </div>
    </article>
    <script src="assets/js/main.ob.js"></script>
</body>

</html>